# Silver Engineer — Continuation Prompt

## Context for the AI Agent

You are continuing development of **Silver Engineer** — a production VS Code extension
that provides an AI pair-programmer with local GraphRAG, embedded MCP server, Chat
Participant (`@silver`), Skills system, and HITL (Human-in-the-Loop) tool invocation.

The full development skill is at: `.github/skills/silver-engineer-dev/SKILL.md`
Read it before making any changes.

---

## Current State (as of last session — 2026-02-28)

### ✅ Completed & Working
- All 13 TypeScript source modules implemented and type-checked (0 TS errors)
- Production VSIX packaged: `silver-engineer-0.1.0.vsix` (1.18 MB, 11 files)
- Extension installs and activates successfully
- `@silver` chat participant works (`@silver /summary`, `/skills`, `/graph`, `/workflow`)
- Daily summary notification fires on startup
- MCP HTTP server runs on dynamic port (127.0.0.1 only)
- Knowledge Graph (graphology) + Vector Store (vectra + TF-IDF fallback)
- Skills system: 2 built-in templates + user skills from `.vscode/silver-skills/`
- FileWatcher: hot-reloads user skills without restart
- CI workflow: `.github/workflows/ci.yml`
- Real 128×128 icon: `assets/icon.png` (generated by `scripts/generate-icon.js`)

### ✅ Critical Bugs Fixed (do NOT reintroduce)
1. **Participant ID** must be `silver-engineer.silver-engineer` (not `silver-engineer.silver`)
2. **`encoder.json` + `vocab.bpe`** must be copied to `dist/` — handled by `copyRuntimeAssets()` in `esbuild.config.js`
3. **`mcpServerDefinitionProviders`** must be declared in `package.json` contributes
4. **No `LanguageModelChatMessage.System`** — use `.User('[SYSTEM] ...')` pattern
5. **ESLint** pinned to `^8.56.0` for peer compat with `@typescript-eslint`

---

## Pending Work (Company Machine)

### Priority 1 — Credentials Setup
```
Ctrl+Shift+P → "Silver Engineer: Configure API Credentials"
```
Enter:
- Jira Base URL: `https://your-company.atlassian.net`
- Jira Email: your work email
- Jira API Token: from https://id.atlassian.com/manage-profile/security/api-tokens
- (Skip GITHUB_PAT — replace with Gerrit later)

In VS Code Settings:
```json
"silverEngineer.jiraBaseUrl": "https://your-company.atlassian.net",
"silverEngineer.jiraProjectKey": "YOUR_PROJECT_KEY"
```

### Priority 2 — Gerrit Integration
Replace `silver_commit_code` GitHub tool with Gerrit REST API.
See "Gerrit Integration" section in SKILL.md for the pattern.

Add to `secretManager.ts`:
```typescript
GERRIT_TOKEN: 'SILVER_GERRIT_TOKEN',
GERRIT_URL:   'SILVER_GERRIT_URL',
```

### Priority 3 — Company-Specific Skills
Add `.vscode/silver-skills/*.md` files for your team's workflows:
- Code review checklist
- Deployment runbook
- Incident response template
- Sprint ceremony templates

### Priority 4 — Vector Store Upgrade
Currently uses TF-IDF fallback. When `ruvector` (WASM) stabilizes:
1. `npm install ruvector`
2. Uncomment the ruvector path in `esbuild.config.js` `copyRuntimeAssets()`
3. Update `src/vectorStore.ts` to prefer ruvector over TF-IDF

---

## How to Resume Development

### First session on new machine:
```powershell
# 1. Clone / copy the project
cd d:\path\to\silver-engineer   # or wherever you put it

# 2. Install dependencies
npm install

# 3. Verify TypeScript
npx tsc --noEmit

# 4. Build
node esbuild.config.js

# 5. Press F5 in VS Code to launch Extension Development Host
```

### Typical dev loop:
```powershell
# Terminal 1 — watch mode
node esbuild.config.js --watch

# VS Code — press F5, then Ctrl+R in Extension Host to reload after each change
```

### Before committing:
```powershell
npx tsc --noEmit                                          # 0 errors required
node esbuild.config.js --production                       # production build
npx vsce package --no-dependencies --allow-missing-repository
code --install-extension silver-engineer-0.1.0.vsix --force
```

---

## Key Invariants (never break these)

1. `package.json` `chatParticipants[].id` === `"silver-engineer.silver-engineer"`
2. `src/chatParticipant.ts` `PARTICIPANT_ID` === `"silver-engineer.silver-engineer"`
3. `copyRuntimeAssets()` must copy `encoder.json` + `vocab.bpe` to `dist/`
4. All proposed VS Code API calls guarded by `typeof x === 'function'`
5. `SilverServices` interface lives only in `src/types.ts` — never inline it elsewhere
6. `ToolRegistry` never imports `McpServerManager` directly — uses `ToolInvoker` callback
7. `.vscodeignore` whitelist pattern — `dist/*.map` must NOT be included in VSIX

---

## File Sizes (reference — production build)

| File | Expected size |
|---|---|
| `dist/extension.js` | ~2.0 MB (minified) |
| `dist/webview.js` | ~2.2 KB |
| `dist/encoder.json` | ~1018 KB |
| `dist/vocab.bpe` | ~446 KB |
| `assets/icon.png` | ~8 KB |
| `.vsix` total | ~1.18 MB |
